(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(28),s=a.n(c),l=(a(82),a(11)),i=a(3),o=a(4),d=a(6),u=a(5),m=a(7),h=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{className:"app-header"},"React PTO Tracker")))}}]),t}(n.Component),E="ADD_PTO_ENTRY",v="SORT_PTO_ENTRIES",p="CALC_ENTRY_BALANCES",b="REQUEST_PTO_ENTRIES",f="RECEIVED_PTO_ENTIRES",D=function(){return{type:v}},j=function(){return{type:p}},O=function(){return{type:b}},g=function(e){return{type:f,payload:e}};var N=a(29),y=a(73),w=a(74),S=a(30),k=a(39),R=a(16),C=a.n(R),T={rollover:38.82,accrualRate:160/12,entries:[]};if(T.rollover>0){var P={id:C()(),startDate:new Date("01/01/19").toLocaleDateString(),endDate:new Date("01/01/19").toLocaleDateString(),description:"2019 Initial Balance",used:0,credit:T.rollover};T.entries.push(P)}for(var B=1;B<=12;B++){var M=B<10?"0"+B:B,q={id:C()(),startDate:new Date(M+"/01/19").toLocaleDateString(),endDate:new Date(M+"/01/19").toLocaleDateString(),description:M+"/01/19 Acrrual",used:0,credit:T.accrualRate};T.entries.push(q)}var Y=T,_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(k.a)({},e,{entries:Object(S.a)(e.entries).concat([t.payload])});case v:return e.entries.sort(function(e,t){var a=new Date(e.startDate).getTime(),n=new Date(t.startDate).getTime(),r=new Date(e.endDate).getTime(),c=new Date(t.endDate).getTime();return a===n?c-r:a-n}),e;case p:var a=0,n=e.rollover+12*e.accrualRate;return e.entries.forEach(function(e){a=e.credit-e.used+a,n-=e.used,e.earnedBalance=a,e.projectedBalance=n}),e;case b:return Object(k.a)({},e,{loading:!0});case f:return Object(k.a)({},e,{entries:t.payload,loading:!1});default:return e}},A=Object(N.c)(_,Object(N.a)(y.a,w.logger)),L=function(e){function t(){var e;return Object(i.a)(this,t),e=Object(d.a)(this,Object(u.a)(t).call(this)),A.dispatch(D()),A.dispatch(j()),A.dispatch(function(e){return e(O()),fetch("http://yahst.com/wt/ptotracker/api/initial.php").then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(t){e(g(t))})}),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getEarnedBalance",value:function(e){var t=(new Date).getTime(),a=e[0];return e.forEach(function(e){t>new Date(e.endDate).getTime()&&(a=e)}),Math.round(100*a.earnedBalance)/100}},{key:"getProjectedBalance",value:function(e){var t=e[this.props.entries.length-1];return Math.round(100*t.projectedBalance)/100}},{key:"render",value:function(){var e=this.getEarnedBalance(this.props.entries),t=this.getProjectedBalance(this.props.entries);return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",null,"Today: "),(new Date).toLocaleDateString()),r.a.createElement("div",{className:"col-md-4 middle"},r.a.createElement("label",null,"2018 Rollover: "),this.props.rollover),r.a.createElement("div",{className:"col-md-4 last"},r.a.createElement("label",null,"Accrual Rate: "),Math.round(100*this.props.accrualRate)/100)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",null,"Projected Accrual: "),12*this.props.accrualRate),r.a.createElement("div",{className:"col-md-4 middle"},r.a.createElement("label",null,"Earned PTO: "),e),r.a.createElement("div",{className:"col-md-4 last"},r.a.createElement("label",null,"Projected PTO: "),t)))}}]),t}(n.Component),I=Object(l.b)(function(e){return{rollover:e.rollover,accrualRate:e.accrualRate,entries:e.entries}})(L),H=a(37),F=a(8),x=a(55),J=(a(132),a(2)),U=a.n(J),Q=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(d.a)(this,Object(u.a)(t).call(this))).initialState={startDate:U()(),endDate:U()(),description:"",hoursRequested:8,errors:[]},e.state=e.initialState,e.handleChange=e.handleChange.bind(Object(F.a)(Object(F.a)(e))),e.handleStartDatePickerChange=e.handleStartDatePickerChange.bind(Object(F.a)(Object(F.a)(e))),e.handleEndDatePickerChange=e.handleEndDatePickerChange.bind(Object(F.a)(Object(F.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(F.a)(Object(F.a)(e))),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"daysBetween",value:function(e,t){var a=new Date(e).getTime(),n=new Date(t).getTime(),r=Math.abs(n-a);return r+=864e5,8*Math.ceil(r/864e5)}},{key:"handleChange",value:function(e){this.setState(Object(H.a)({},e.target.id,e.target.value)),this.state.errors.length>0&&this.validateEntry()}},{key:"setHoursRequested",value:function(e,t){if(e&&t){var a=this.daysBetween(e,t);this.setState({hoursRequested:a})}}},{key:"handleStartDatePickerChange",value:function(e){this.setState({startDate:e}),this.setHoursRequested(e,this.state.endDate),this.state.errors.length>0&&this.validateEntry()}},{key:"handleEndDatePickerChange",value:function(e){this.setState({endDate:e}),this.setHoursRequested(this.state.startDate,e),this.state.errors.length>0&&this.validateEntry()}},{key:"validateEntry",value:function(){var e=!0;if(this.setState({errors:[]}),!this.state.startDate||!this.state.endDate||!this.state.description.trim()){var t={id:C()(),message:"Requires Start Date, End Date, and Description"};this.setState({errors:Object(S.a)(this.state.errors).concat([t])}),e=!1}if(this.state.startDate>this.state.endDate){var a={id:C()(),message:"Start Date must be less then End Date"};this.setState({errors:Object(S.a)(this.state.errors).concat([a])}),e=!1}return e}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.validateEntry()){var t=this.state,a=t.description,n=t.hoursRequested,r=this.state.startDate.format("MM/DD/YYYY"),c=this.state.endDate.format("MM/DD/YYYY"),s=n,l=C()();this.props.addPtoEntry({id:l,startDate:r,endDate:c,description:a,used:s,credit:0}),this.props.sortPtoEntries(),this.props.calcEntryBalances(),this.setState(this.initialState)}}},{key:"render",value:function(){var e=this.state,t=e.startDate,a=e.endDate,n=e.description,c=e.hoursRequested;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3 "},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"startDate"},"Start Date"),r.a.createElement(x.a,{className:"form-control",selected:t,onChange:this.handleStartDatePickerChange}))),r.a.createElement("div",{className:"col-md-3 "},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"endDate"},"End Date"),r.a.createElement(x.a,{className:"form-control",selected:a,onChange:this.handleEndDatePickerChange}))),r.a.createElement("div",{className:"col-md-3 "},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("input",{type:"text",className:"form-control",id:"description",value:n,onChange:this.handleChange,required:!0}))),r.a.createElement("div",{className:"col-md-3 "},r.a.createElement("button",{type:"submit",className:"submit-pto-entry btn btn-success btn-lg form-control"},"Request ",c," Hours"))),r.a.createElement("div",{className:"alert alert-danger"+(this.state.errors.length>0?"":"hide")},this.state.errors.map(function(e){return r.a.createElement("p",{key:e.id,className:"red"},e.message)})))}}]),t}(n.Component),V=Object(l.b)(function(e){return{entries:e.entries}},function(e){return{addPtoEntry:function(t){return e(function(e){return{type:E,payload:e}}(t))},sortPtoEntries:function(){return e(D())},calcEntryBalances:function(){return e(j())}}})(Q),z=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-md-12 "},r.a.createElement("h3",null,"Add a PTO Entry"))),r.a.createElement(V,null))}}]),t}(n.Component),G=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getRowClasses",value:function(e){var t=(new Date).getTime(),a="";return e.used>0&&(a+=" pto-entries-used-pto-row"),new Date(e.endDate).getTime()>t&&(a+=" pto-entries-future-pto-row"),a}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row pto-entries-header"},r.a.createElement("div",{className:"col-md-2"},"Start Date"),r.a.createElement("div",{className:"col-md-2"},"End Date"),r.a.createElement("div",{className:"col-md-2"},"Description"),r.a.createElement("div",{className:"col-md-1"},"Used"),r.a.createElement("div",{className:"col-md-1"},"Credit"),r.a.createElement("div",{className:"col-md-2"},"Earned Balance"),r.a.createElement("div",{className:"col-md-2"},"Projected Balance")),this.props.entries.map(function(t){return r.a.createElement("div",{className:"row pto-entries-row "+e.getRowClasses(t),key:t.id},r.a.createElement("div",{className:"col-md-2"},t.startDate),r.a.createElement("div",{className:"col-md-2"},t.endDate),r.a.createElement("div",{className:"col-md-2"},t.description),r.a.createElement("div",{className:"col-md-1"},Math.round(100*t.used)/100),r.a.createElement("div",{className:"col-md-1"},Math.round(100*t.credit)/100),r.a.createElement("div",{className:"col-md-2"},Math.round(100*t.earnedBalance)/100),r.a.createElement("div",{className:"col-md-2"},Math.round(100*t.projectedBalance)/100))})))}}]),t}(n.Component),K=Object(l.b)(function(e){return{entries:e.entries,rollover:e.rollover,accrualRate:e.accrualRate}})(G),W=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12 "},r.a.createElement("h3",null,"Pto Entries"))),r.a.createElement(K,null))}}]),t}(n.Component),X=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(h,null),r.a.createElement(I,null),r.a.createElement(z,null),r.a.createElement(W,null))}}]),t}(n.Component);s.a.render(r.a.createElement(l.a,{store:A},r.a.createElement(X,null)),document.getElementById("root"))},77:function(e,t,a){e.exports=a(134)},82:function(e,t,a){}},[[77,2,1]]]);
//# sourceMappingURL=main.87f8b7f1.chunk.js.map